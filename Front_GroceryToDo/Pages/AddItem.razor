@page "/AddItem"
@using Front_GroceryToDo.Data
@using Front_GroceryToDo.Models
@inject IRecordsService RecordsService
@inject NavigationManager NavManager

<div class="card">
    <div class="card-body">
        <h3>AddItem</h3>
        <hr/>
        <p>
            <input @bind="name"/>
        </p>
        <button class="btn btn-primary" @onclick="Add">
            Add
        </button>
        <p>
            <em style="color: red">@errorMessage</em>
        </p>
    </div>
</div>


@code {

    private string name;
    private string errorMessage;

    private async Task Add()
    {
        if (!String.IsNullOrEmpty(name))
        {
            Item item = new Item();
            item.Name = name;
            bool isAddSuccess = await RecordsService.AddItemToRecordAsync(item);
            if (isAddSuccess)
            {
                errorMessage = "";
                NavManager.NavigateTo("GroceryList");
            }
            else
            {
                errorMessage = "An error occured.";
            }
        }
        else
        {
            errorMessage = "The task should have a name!";
        }
    }

}